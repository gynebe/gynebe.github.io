(()=>{var ce=Object.defineProperty;var A=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var K=(e,t,o)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,d=(e,t)=>{for(var o in t||(t={}))me.call(t,o)&&K(e,o,t[o]);if(A)for(var o of A(t))de.call(t,o)&&K(e,o,t[o]);return e};var l=class{constructor(t=0,o="Network Error"){this.status=t,this.text=o}};var Y=()=>{if(typeof localStorage!="undefined")return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}};var a={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Y()};var h=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{};var J=(e,t="https://api.emailjs.com")=>{if(!e)return;let o=h(e);a.publicKey=o.publicKey,a.blockHeadless=o.blockHeadless,a.storageProvider=o.storageProvider,a.blockList=o.blockList,a.limitRate=o.limitRate,a.origin=o.origin||t};var D=async(e,t,o={})=>{let n=await fetch(a.origin+e,{method:"POST",headers:o,body:t}),r=await n.text(),s=new l(n.status,r);if(n.ok)return s;throw s};var x=(e,t,o)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!o||typeof o!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"};var N=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"};var T=e=>e.webdriver||!e.languages||e.languages.length===0;var B=()=>new l(451,"Unavailable For Headless Browser");var W=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"};var ue=e=>{var t;return!((t=e.list)!=null&&t.length)||!e.watchVariable},pe=(e,t)=>e instanceof FormData?e.get(t):e[t],M=(e,t)=>{if(ue(e))return!1;W(e.list,e.watchVariable);let o=pe(t,e.watchVariable);return typeof o!="string"?!1:e.list.includes(o)};var R=()=>new l(403,"Forbidden");var z=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"};var fe=async(e,t,o)=>{let n=Number(await o.get(e)||0);return t-Date.now()+n},j=async(e,t,o)=>{if(!t.throttle||!o)return!1;z(t.throttle,t.id);let n=t.id||e;return await fe(n,t.throttle,o)>0?!0:(await o.set(n,Date.now().toString()),!1)};var H=()=>new l(429,"Too Many Requests");var U=async(e,t,o,n)=>{let r=h(n),s=r.publicKey||a.publicKey,m=r.blockHeadless||a.blockHeadless,b=r.storageProvider||a.storageProvider,k=d(d({},a.blockList),r.blockList),v=d(d({},a.limitRate),r.limitRate);return m&&T(navigator)?Promise.reject(B()):(x(s,e,t),N(o),o&&M(k,o)?Promise.reject(R()):await j(location.pathname,v,b)?Promise.reject(H()):D("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:e,template_id:t,template_params:o}),{"Content-type":"application/json"}))};var G=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"};var ge=e=>typeof e=="string"?document.querySelector(e):e,Q=async(e,t,o,n)=>{let r=h(n),s=r.publicKey||a.publicKey,m=r.blockHeadless||a.blockHeadless,b=a.storageProvider||r.storageProvider,k=d(d({},a.blockList),r.blockList),v=d(d({},a.limitRate),r.limitRate);if(m&&T(navigator))return Promise.reject(B());let g=ge(o);x(s,e,t),G(g);let i=new FormData(g);return M(k,i)?Promise.reject(R()):await j(location.pathname,v,b)?Promise.reject(H()):(i.append("lib_version","4.4.1"),i.append("service_id",e),i.append("template_id",t),i.append("user_id",s),D("/api/v1.0/email/send-form",i))};var I={init:J,send:U,sendForm:Q,EmailJSResponseStatus:l};I.init("c0UqVFYtByUWzi-5c");var ee={Porto:{1:{daySlots:{2:[{start:"10:20",end:"13:20"},{start:"15:00",end:"19:00"}],5:[{start:"10:20",end:"13:20"},{start:"15:00",end:"19:00"}]}},2:{daySlots:{2:[{start:"15:00",end:"18:00"}]}}},"Santo Tirso":{1:{daySlots:{1:[{start:"15:00",end:"19:00"}],3:[{start:"09:00",end:"12:40"}]}}}},c=0,X=document.documentElement.lang||"pt-PT",te=document.querySelectorAll(".form-step"),f=document.getElementById("appointmentForm"),he=document.getElementById("weekLabel"),Z=document.getElementById("calendarTable"),F=document.getElementById("selectedSlot"),C=f.elements.specialty,$=f.elements.location,V=new Date().getFullYear(),q=new Date().getMonth(),u=oe(new Date);function y(e){te.forEach((t,o)=>t.classList.toggle("active",o===e))}window.nextStep=function(){let e=te[c].querySelectorAll("input, select");for(let t of e)if(!t.checkValidity()){t.reportValidity();return}c++,y(c),P(u)};window.prevStep=function(){c--,y(c)};function oe(e){e=new Date(e);let t=e.getDay(),o=e.getDate()-t+(t===0?-6:1);return new Date(e.setDate(o))}function S(e,t){let[o,n]=t.split(":").map(Number),r=new Date(e);return r.setHours(o,n,0,0),r}function ye(e,t,o,n){let r=[],s=S(e,t),m=S(e,o);for(;s<=m;)r.push(new Date(s)),s=new Date(s.getTime()+n*6e4);return r}function P(e){var g;F.value="";let t=(g=ee[$.value])==null?void 0:g[C.selectedIndex],o=document.querySelector(".calendar"),n=new Date(V,q,1),r=`${n.toLocaleString(X,{month:"long"})} ${n.getFullYear()}`;if(he.innerHTML=`
        <div class="calendar-header">
            <button onclick="changeMonth(-1)">&lt;</button>
            <strong>${r}</strong>
            <button onclick="changeMonth(1)">&gt;</button>
        </div>
    `,!t||!t.daySlots){o.style.display="none",Z.innerHTML="";return}else o.style.display="block";let s=[...Array(5)].map((i,p)=>{let w=new Date(e);return w.setDate(e.getDate()+p),w}),m=new Date;m.setHours(0,0,0,0),m.setDate(m.getDate()+1);let b=s.map(i=>{let p=i<m,w=i.toLocaleDateString(X,{weekday:"short",day:"numeric",month:"numeric"});return`<th class="${p?"disabled-slot":""}">${w}</th>`}).join(""),v=ye(new Date,"09:00","19:00",20).map(i=>{let p=i.toTimeString().slice(0,5);return`<tr>${s.map(E=>{let re=E.getDay(),_=S(E,p),ne=t.daySlots[re]||[],L=new Date;L.setHours(0,0,0,0),L.setDate(L.getDate()+1);let ae=ne.some(O=>{let ie=S(E,O.start),le=S(E,O.end);return _>=ie&&_<=le&&_>=L}),se=`${E.toLocaleDateString()} ${p}`;return`<td class="${ae?"slot":"disabled-slot"}" data-slot="${se}">${p}</td>`}).join("")}</tr>`});Z.innerHTML=`
        <table>
            <thead><tr>${b}</tr></thead>
            <tbody>${v.join("")}</tbody>
        </table>
    `,document.querySelectorAll(".slot").forEach(i=>{i.addEventListener("click",()=>{document.querySelectorAll(".slot").forEach(p=>p.classList.remove("selected")),i.classList.add("selected"),F.value=i.dataset.slot})})}C.addEventListener("change",()=>P(u));$.addEventListener("change",()=>P(u));window.changeWeek=function(e){u.setDate(u.getDate()+e*7),V=u.getFullYear(),q=u.getMonth(),P(u)};window.changeMonth=function(e){let t=new Date(V,q+e,1),o=t.getDay();o===6?t.setDate(t.getDate()+2):o===0&&t.setDate(t.getDate()+1),V=t.getFullYear(),q=t.getMonth(),u=oe(t),P(u)};f.addEventListener("submit",function(e){var n,r;if(e.preventDefault(),!F.value&&((n=ee[f.elements.location.value])!=null&&n[f.elements.specialty.value])){alert("Por favor selecione um hor\xE1rio.");return}if(!grecaptcha.getResponse()){alert("Por favor confirma que n\xE3o \xE9s um rob\xF4.");return}let o={name:document.getElementById("name").value,email:document.getElementById("email").value,birthday:document.getElementById("birthday").value,contact:document.getElementById("contact").value,specialty:C.value,location:$.value,selectedSlot:F.value||"Sem hor\xE1rio selecionado",notes:((r=f.querySelector('[name="notes"]'))==null?void 0:r.value)||""};I.send("service_2mkemrj","template_yaezzgg",o).then(()=>{c=0,y(c),I.send("service_2mkemrj","template_ppny0sk",o).then(()=>{document.documentElement.lang=="en"?document.getElementById("statusMsg").textContent="Appointment request successfully submitted! Pending confirmation.":document.documentElement.lang=="es"?document.getElementById("statusMsg").textContent="\xA1Solicitud de cita enviada correctamente! Pendiente de confirmaci\xF3n.":document.getElementById("statusMsg").textContent="Pedido de agendamento enviado com sucesso! Pendente de confirma\xE7\xE3o.",f.reset()}).catch(s=>{console.error("Erro no email do cliente:",s),document.documentElement.lang=="en"?document.getElementById("statusMsg").textContent="Error sending confirmation email. Please try again.":document.documentElement.lang=="es"?document.getElementById("statusMsg").textContent="Error al enviar el correo electr\xF3nico de confirmaci\xF3n. Por favor, int\xE9ntalo de nuevo.":document.getElementById("statusMsg").textContent="Erro ao enviar o e-mail de confirma\xE7\xE3o. Por favor tente novamente.",c=0,y(c)})}).catch(s=>{console.error("Erro no email da cl\xEDnica:",s),document.documentElement.lang=="en"?document.getElementById("statusMsg").textContent="Error sending email. Please try again.":document.documentElement.lang=="es"?document.getElementById("statusMsg").textContent="Error al enviar el correo electr\xF3nico. Por favor, int\xE9ntalo de nuevo.":document.getElementById("statusMsg").textContent="Erro ao enviar o e-mail. Por favor tente novamente.",c=0,y(c)})});y(0);})();
