(()=>{var se=Object.defineProperty;var $=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var O=(e,t,o)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,d=(e,t)=>{for(var o in t||(t={}))ie.call(t,o)&&O(e,o,t[o]);if($)for(var o of $(t))le.call(t,o)&&O(e,o,t[o]);return e};var c=class{constructor(t=0,o="Network Error"){this.status=t,this.text=o}};var A=()=>{if(typeof localStorage!="undefined")return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}};var a={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:A()};var h=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{};var K=(e,t="https://api.emailjs.com")=>{if(!e)return;let o=h(e);a.publicKey=o.publicKey,a.blockHeadless=o.blockHeadless,a.storageProvider=o.storageProvider,a.blockList=o.blockList,a.limitRate=o.limitRate,a.origin=o.origin||t};var L=async(e,t,o={})=>{let n=await fetch(a.origin+e,{method:"POST",headers:o,body:t}),r=await n.text(),s=new c(n.status,r);if(n.ok)return s;throw s};var x=(e,t,o)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!o||typeof o!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"};var Y=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"};var T=e=>e.webdriver||!e.languages||e.languages.length===0;var D=()=>new c(451,"Unavailable For Headless Browser");var J=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"};var ce=e=>{var t;return!((t=e.list)!=null&&t.length)||!e.watchVariable},me=(e,t)=>e instanceof FormData?e.get(t):e[t],B=(e,t)=>{if(ce(e))return!1;J(e.list,e.watchVariable);let o=me(t,e.watchVariable);return typeof o!="string"?!1:e.list.includes(o)};var M=()=>new c(403,"Forbidden");var N=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"};var de=async(e,t,o)=>{let n=Number(await o.get(e)||0);return t-Date.now()+n},R=async(e,t,o)=>{if(!t.throttle||!o)return!1;N(t.throttle,t.id);let n=t.id||e;return await de(n,t.throttle,o)>0?!0:(await o.set(n,Date.now().toString()),!1)};var j=()=>new c(429,"Too Many Requests");var W=async(e,t,o,n)=>{let r=h(n),s=r.publicKey||a.publicKey,p=r.blockHeadless||a.blockHeadless,P=r.storageProvider||a.storageProvider,b=d(d({},a.blockList),r.blockList),g=d(d({},a.limitRate),r.limitRate);return p&&T(navigator)?Promise.reject(D()):(x(s,e,t),Y(o),o&&B(b,o)?Promise.reject(M()):await R(location.pathname,g,P)?Promise.reject(j()):L("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:e,template_id:t,template_params:o}),{"Content-type":"application/json"}))};var z=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"};var ue=e=>typeof e=="string"?document.querySelector(e):e,U=async(e,t,o,n)=>{let r=h(n),s=r.publicKey||a.publicKey,p=r.blockHeadless||a.blockHeadless,P=a.storageProvider||r.storageProvider,b=d(d({},a.blockList),r.blockList),g=d(d({},a.limitRate),r.limitRate);if(p&&T(navigator))return Promise.reject(D());let l=ue(o);x(s,e,t),z(l);let i=new FormData(l);return B(b,i)?Promise.reject(M()):await R(location.pathname,g,P)?Promise.reject(j()):(i.append("lib_version","4.4.1"),i.append("service_id",e),i.append("template_id",t),i.append("user_id",s),L("/api/v1.0/email/send-form",i))};var H={init:K,send:W,sendForm:U,EmailJSResponseStatus:c};H.init("c0UqVFYtByUWzi-5c");var X={Porto:{1:{daySlots:{2:[{start:"10:20",end:"13:20"},{start:"15:00",end:"19:00"}],5:[{start:"10:20",end:"13:20"},{start:"15:00",end:"19:00"}]}},2:{daySlots:{2:[{start:"15:00",end:"18:00"}]}}},"Santo Tirso":{1:{daySlots:{1:[{start:"15:00",end:"19:00"}],3:[{start:"09:00",end:"12:40"}]}}}},m=0,G=document.documentElement.lang||"pt-PT",Z=document.querySelectorAll(".form-step"),f=document.getElementById("appointmentForm"),pe=document.getElementById("weekLabel"),Q=document.getElementById("calendarTable"),I=document.getElementById("selectedSlot"),V=f.elements.specialty,q=f.elements.location,E=new Date().getFullYear(),S=new Date().getMonth(),u=ee(new Date(E,S,1));function y(e){Z.forEach((t,o)=>t.classList.toggle("active",o===e))}window.nextStep=function(){let e=Z[m].querySelectorAll("input, select");for(let t of e)if(!t.checkValidity()){t.reportValidity();return}m++,y(m),k(u)};window.prevStep=function(){m--,y(m)};function ee(e){e=new Date(e);let t=e.getDay(),o=e.getDate()-t+(t===0?-6:1);return new Date(e.setDate(o))}function w(e,t){let[o,n]=t.split(":").map(Number),r=new Date(e);return r.setHours(o,n,0,0),r}function fe(e,t,o,n){let r=[],s=w(e,t),p=w(e,o);for(;s<=p;)r.push(new Date(s)),s=new Date(s.getTime()+n*6e4);return r}function k(e){var g;I.value="";let t=(g=X[q.value])==null?void 0:g[V.selectedIndex],o=document.querySelector(".calendar"),n=new Date(E,S,1),r=`${n.toLocaleString(G,{month:"long"})} ${n.getFullYear()}`;if(pe.innerHTML=`
        <div class="calendar-header">
            <button onclick="changeMonth(-1)">&lt;</button>
            <strong>${r}</strong>
            <button onclick="changeMonth(1)">&gt;</button>
        </div>
    `,!t||!t.daySlots){o.style.display="none",Q.innerHTML="";return}else o.style.display="block";let s=[...Array(5)].map((l,i)=>{let F=new Date(e);return F.setDate(e.getDate()+i),F}),p=s.map(l=>`<th>${l.toLocaleDateString(G,{weekday:"short",day:"numeric",month:"numeric"})}</th>`).join(""),b=fe(new Date,"09:00","19:00",20).map(l=>{let i=l.toTimeString().slice(0,5);return`<tr>${s.map(v=>{let te=v.getDay(),_=w(v,i),oe=(t.daySlots[te]||[]).some(C=>{let ne=w(v,C.start),ae=w(v,C.end);return _>=ne&&_<=ae}),re=`${v.toLocaleDateString()} ${i}`;return`<td class="${oe?"slot":"disabled-slot"}" data-slot="${re}">${i}</td>`}).join("")}</tr>`});Q.innerHTML=`
        <table>
            <thead><tr>${p}</tr></thead>
            <tbody>${b.join("")}</tbody>
        </table>
    `,document.querySelectorAll(".slot").forEach(l=>{l.addEventListener("click",()=>{document.querySelectorAll(".slot").forEach(i=>i.classList.remove("selected")),l.classList.add("selected"),I.value=l.dataset.slot})})}V.addEventListener("change",()=>k(u));q.addEventListener("change",()=>k(u));window.changeWeek=function(e){u.setDate(u.getDate()+e*7),E=u.getFullYear(),S=u.getMonth(),k(u)};window.changeMonth=function(e){let t=new Date(E,S+e,1),o=t.getDay();o===6?t.setDate(t.getDate()+2):o===0&&t.setDate(t.getDate()+1),E=t.getFullYear(),S=t.getMonth(),u=ee(t),k(u)};f.addEventListener("submit",function(e){var n,r;if(e.preventDefault(),!I.value&&((n=X[f.elements.location.value])!=null&&n[f.elements.specialty.value])){alert("Por favor selecione um hor\xE1rio.");return}if(!grecaptcha.getResponse()){alert("Por favor confirma que n\xE3o \xE9s um rob\xF4.");return}let o={name:document.getElementById("name").value,email:document.getElementById("email").value,birthday:document.getElementById("birthday").value,contact:document.getElementById("contact").value,specialty:V.value,location:q.value,selectedSlot:I.value||"Sem hor\xE1rio selecionado",notes:((r=f.querySelector('[name="notes"]'))==null?void 0:r.value)||""};H.send("service_2mkemrj","template_yaezzgg",o).then(()=>{m=0,y(m),H.send("service_2mkemrj","template_ppny0sk",o).then(()=>{document.documentElement.lang=="en"?document.getElementById("statusMsg").textContent="Appointment request successfully submitted! Pending confirmation.":document.documentElement.lang=="es"?document.getElementById("statusMsg").textContent="\xA1Solicitud de cita enviada correctamente! Pendiente de confirmaci\xF3n.":document.getElementById("statusMsg").textContent="Pedido de agendamento enviado com sucesso! Pendente de confirma\xE7\xE3o.",f.reset()}).catch(s=>{console.error("Erro no email do cliente:",s),document.documentElement.lang=="en"?document.getElementById("statusMsg").textContent="Error sending confirmation email. Please try again.":document.documentElement.lang=="es"?document.getElementById("statusMsg").textContent="Error al enviar el correo electr\xF3nico de confirmaci\xF3n. Por favor, int\xE9ntalo de nuevo.":document.getElementById("statusMsg").textContent="Erro ao enviar o e-mail de confirma\xE7\xE3o. Por favor tente novamente.",m=0,y(m)})}).catch(s=>{console.error("Erro no email da cl\xEDnica:",s),document.documentElement.lang=="en"?document.getElementById("statusMsg").textContent="Error sending email. Please try again.":document.documentElement.lang=="es"?document.getElementById("statusMsg").textContent="Error al enviar el correo electr\xF3nico. Por favor, int\xE9ntalo de nuevo.":document.getElementById("statusMsg").textContent="Erro ao enviar o e-mail. Por favor tente novamente.",m=0,y(m)})});y(0);})();
