const slider=document.querySelector(".slider"),sliderItems=slider.querySelector(".slides"),slides=Array.from(sliderItems.children),prev=slider.querySelector(".prev"),next=slider.querySelector(".next");let index=0;function initBullets(){const t=document.createElement("div");t.classList.add("sliderBullets"),slides.forEach(()=>{const e=document.createElement("button");e.classList.add("bullets"),t.appendChild(e)}),t.firstElementChild.classList.add("currentSlide"),slider.appendChild(t)}function slide(e,l,t,n){let s=0,d=0,i,r,o=100,c=l.querySelectorAll(".slide"),u=slider.querySelector(".sliderBullets"),a=Array.from(u.children),f=c.length,m=c[0].offsetWidth,p=c[0],v=c[f-1],h=p.cloneNode(!0),x=v.cloneNode(!0),L=!0;const y=(e,t)=>{e.classList.remove("currentSlide"),a[t].classList.add("currentSlide")};function S(e){(e=e||window.event).preventDefault(),i=l.offsetLeft,"touchstart"==e.type?s=e.touches[0].clientX:(s=e.clientX,document.onmouseup=q,document.onmousemove=E)}function E(e){e=e||window.event,s="touchmove"==e.type?(d=s-e.touches[0].clientX,e.touches[0].clientX):(d=s-e.clientX,e.clientX),l.style.left=l.offsetLeft-d+"px"}function q(e){r=l.offsetLeft,r-i<-o?g(1,"drag"):r-i>o?g(-1,"drag"):l.style.left=i+"px",document.onmouseup=null,document.onmousemove=null}function g(e,t){l.classList.add("shifting"),L&&(t||(i=l.offsetLeft),1===e?(l.style.left=i-m+"px",index++):-1===e&&(l.style.left=i+m+"px",index--)),L=!1}l.appendChild(h),l.insertBefore(x,p),e.classList.add("loaded"),l.onmousedown=S,l.addEventListener("touchstart",S),l.addEventListener("touchend",q),l.addEventListener("touchmove",E),t.addEventListener("click",function(){g(-1)}),n.addEventListener("click",function(){g(1)}),u.addEventListener("click",e=>{const t=e.target.closest("button");var n;null!==t&&(n=slider.querySelector(".currentSlide"),-1!==(e=a.findIndex(e=>e===t))&&(y(n,e),l.classList.add("shifting"),l.style.left=-(e+1)*m+"px",index=e))}),l.addEventListener("transitionend",function(){l.classList.remove("shifting"),-1===index&&(l.style.left=-(f*m)+"px",index=f-1);index===f&&(l.style.left=-+m+"px",index=0);y(slider.querySelector(".currentSlide"),index),L=!0})}initBullets(),slide(slider,sliderItems,prev,next);