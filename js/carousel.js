const slider=document.querySelector(".slider"),sliderItems=slider.querySelector(".slides"),slides=Array.from(sliderItems.children),prev=slider.querySelector(".prev"),next=slider.querySelector(".next");let index=0;function initBullets(){const t=document.createElement("div");t.classList.add("sliderBullets"),slides.forEach(()=>{const e=document.createElement("button");e.classList.add("bullets"),t.appendChild(e)}),t.firstElementChild.classList.add("currentSlide"),slider.appendChild(t)}function slide(e,s,t,n){let i=0,d=0,l,r,o=100,c=s.querySelectorAll(".slide"),u=slider.querySelector(".sliderBullets"),a=Array.from(u.children),f=c.length,m,y=c[0],v=c[f-1],p=y.cloneNode(!0),h=v.cloneNode(!0),x=!0;const L=(e,t)=>{e.classList.remove("currentSlide"),a[t].classList.add("currentSlide")};function S(e){(e=e||window.event).preventDefault(),l=s.offsetLeft,"touchstart"==e.type?i=e.touches[0].clientX:(i=e.clientX,document.onmouseup=q,document.onmousemove=E)}function E(e){e=e||window.event,i="touchmove"==e.type?(d=i-e.touches[0].clientX,e.touches[0].clientX):(d=i-e.clientX,e.clientX),s.style.left=s.offsetLeft-d+"px"}function q(e){r=s.offsetLeft,r-l<-o?w(1):r-l>o?w(-1):s.style.setProperty("left",`${-100*(index+1)}%`),document.onmouseup=null,document.onmousemove=null}function w(e){s.classList.add("shifting"),x&&(1===e?(index++,s.style.setProperty("left",`${-100*(index+1)}%`)):-1===e&&(index--,s.style.setProperty("left",`${-100*(index+1)}%`))),x=!1}s.appendChild(p),s.insertBefore(h,y),e.classList.add("loaded"),s.onmousedown=S,s.addEventListener("touchstart",S),s.addEventListener("touchend",q),s.addEventListener("touchmove",E),t.addEventListener("click",function(){w(-1)}),n.addEventListener("click",function(){w(1)}),u.addEventListener("click",e=>{const t=e.target.closest("button");var n;null!==t&&(n=slider.querySelector(".currentSlide"),-1!==(e=a.findIndex(e=>e===t))&&(L(n,e),s.classList.add("shifting"),index=e,s.style.setProperty("left",`${-100*(index+1)}%`)))}),s.addEventListener("transitionend",function(){s.classList.remove("shifting"),-1===index&&(index=f-1,s.style.setProperty("left",`${-100*(index+1)}%`));index===f&&(index=0,s.style.setProperty("left",`${-100*(index+1)}%`));L(slider.querySelector(".currentSlide"),index),x=!0}),window.addEventListener("resize",e=>{m=c[0].offsetWidth})}initBullets(),slide(slider,sliderItems,prev,next);